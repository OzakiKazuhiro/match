"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[642],{1332:(e,r,s)=>{s.d(r,{A:()=>o});var a=s(3589),n=s(6540),t=s(4848);function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var a,n,t,l,i=[],o=!0,c=!1;try{if(t=(s=s.call(e)).next,0===r){if(Object(s)!==s)return;o=!1}else for(;!(o=(a=t.call(s)).done)&&(i.push(a.value),i.length!==r);o=!0);}catch(e){c=!0,n=e}finally{try{if(!o&&null!=s.return&&(l=s.return(),Object(l)!==l))return}finally{if(c)throw n}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return i(e,r);var s={}.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var s=0,a=Array(r);s<r;s++)a[s]=e[s];return a}function o(e){var r=e.header,s=e.children,i=(0,a.N5)().props.auth.user,o=l((0,n.useState)(!1),2),c=o[0],d=o[1],u=l((0,n.useState)(!1),2),m=u[0],h=u[1],f=(0,n.useRef)(null),_=(0,n.useRef)(null),g=(0,n.useRef)(null);return(0,n.useEffect)((function(){var e=function(e){f.current&&!f.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),(0,n.useEffect)((function(){var e=function(e){_.current&&!_.current.contains(e.target)&&g.current&&!g.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),(0,t.jsxs)("div",{className:"min-h-screen bg-f5f7fa",children:[(0,t.jsxs)("header",{className:"l-header",children:[(0,t.jsxs)("div",{className:"l-header__inner",children:[(0,t.jsx)(a.N_,{href:"/",className:"l-header__logo",children:(0,t.jsx)("span",{className:"l-header__logo-accent",children:"match"})}),(0,t.jsxs)("nav",{className:"l-header__nav",children:[(0,t.jsx)(a.N_,{href:"/job-listings",className:"l-header__nav-link",children:"案件一覧"}),(0,t.jsx)(a.N_,{href:"/post-job",className:"l-header__nav-link",children:"案件を投稿"}),(0,t.jsxs)("div",{className:"l-header__user-menu",ref:f,children:[(0,t.jsxs)("button",{onClick:function(){return d(!c)},className:"l-header__user-button",children:[(0,t.jsx)("div",{className:"l-header__user-avatar",children:i.avatar?(0,t.jsx)("img",{src:i.avatar.startsWith("/")?i.avatar:"/".concat(i.avatar),alt:"".concat(i.name,"のアバター"),onError:function(e){e.currentTarget.onerror=null,e.currentTarget.src="",e.currentTarget.parentElement&&(e.currentTarget.parentElement.innerHTML=i.name.charAt(0).toUpperCase())}}):i.name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"l-header__user-info",children:[(0,t.jsx)("span",{className:"l-header__login-status",children:"ログイン中"}),(0,t.jsxs)("span",{className:"l-header__user-name",children:[i.name,"さん"]})]}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M6 9l6 6 6-6"})})]}),c&&(0,t.jsxs)("div",{className:"l-header__dropdown",children:[(0,t.jsx)(a.N_,{href:route("dashboard"),className:"l-header__dropdown-item",children:"マイページ"}),(0,t.jsx)(a.N_,{href:route("profile.edit"),className:"l-header__dropdown-item",children:"プロフィール編集"}),(0,t.jsx)(a.N_,{href:route("logout"),method:"post",as:"button",className:"l-header__dropdown-item l-header__dropdown-item--danger",children:"ログアウト"})]})]})]}),(0,t.jsx)("button",{className:"l-header__mobile-button",onClick:function(){return h(!m)},ref:g,children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,t.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,t.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]}),m&&(0,t.jsxs)("div",{className:"l-header__mobile-menu",ref:_,children:[(0,t.jsxs)("div",{className:"l-header__mobile-user",children:[(0,t.jsx)("div",{className:"l-header__user-avatar",children:i.avatar?(0,t.jsx)("img",{src:i.avatar.startsWith("/")?i.avatar:"/".concat(i.avatar),alt:"".concat(i.name,"のアバター"),onError:function(e){e.currentTarget.onerror=null,e.currentTarget.src="",e.currentTarget.parentElement&&(e.currentTarget.parentElement.innerHTML=i.name.charAt(0).toUpperCase())}}):i.name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"l-header__mobile-user-info",children:[(0,t.jsxs)("span",{className:"l-header__mobile-user-name",children:[i.name,"さん"]}),(0,t.jsx)("span",{className:"l-header__mobile-login-status",children:"ログイン中"})]})]}),(0,t.jsx)(a.N_,{href:"/job-listings",className:"l-header__mobile-link",children:"案件一覧"}),(0,t.jsx)(a.N_,{href:"/post-job",className:"l-header__mobile-link",children:"案件を投稿"}),(0,t.jsx)(a.N_,{href:route("dashboard"),className:"l-header__mobile-link",children:"マイページ"}),(0,t.jsx)(a.N_,{href:route("profile.edit"),className:"l-header__mobile-link",children:"プロフィール編集"}),(0,t.jsx)(a.N_,{href:route("logout"),method:"post",as:"button",className:"l-header__mobile-link l-header__mobile-link--danger",children:"ログアウト"})]})]}),r&&(0,t.jsx)("div",{className:"p-dashboard__header",children:(0,t.jsx)("div",{className:"p-dashboard__header-inner",children:r})}),(0,t.jsx)("main",{className:"main-content",children:s}),(0,t.jsx)("footer",{className:"l-footer",children:(0,t.jsxs)("div",{className:"l-footer__container",children:[(0,t.jsxs)("div",{className:"l-footer__content",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.N_,{href:"/",className:"l-footer__logo",children:(0,t.jsx)("span",{className:"l-footer__logo-accent",children:"match"})}),(0,t.jsx)("p",{className:"l-footer__description",children:"エンジニア向けの案件マッチングサービス。 単発案件からレベニューシェア案件まで、 シンプルに探せて、すぐに応募できます。"}),(0,t.jsx)("div",{className:"l-footer__social",children:(0,t.jsx)("a",{href:"#",className:"l-footer__social-icon",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"})})})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"l-footer__heading",children:"案件を探す"}),(0,t.jsxs)("ul",{className:"l-footer__links",children:[(0,t.jsx)("li",{className:"l-footer__link-item",children:(0,t.jsx)(a.N_,{href:"/job-listings?type=onetime",className:"l-footer__link",children:"単発案件"})}),(0,t.jsx)("li",{className:"l-footer__link-item",children:(0,t.jsx)(a.N_,{href:"/job-listings?type=revenue",className:"l-footer__link",children:"レベニューシェア案件"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"l-footer__heading",children:"アカウント"}),(0,t.jsxs)("ul",{className:"l-footer__links",children:[(0,t.jsx)("li",{className:"l-footer__link-item",children:(0,t.jsx)(a.N_,{href:route("dashboard"),className:"l-footer__link",children:"マイページ"})}),(0,t.jsx)("li",{className:"l-footer__link-item",children:(0,t.jsx)(a.N_,{href:route("profile.edit"),className:"l-footer__link",children:"プロフィール編集"})})]})]})]}),(0,t.jsxs)("div",{className:"l-footer__copyright",children:["© ",(new Date).getFullYear()," match. All rights reserved."]})]})})]})}},2292:(e,r,s)=>{s.d(r,{A:()=>c});var a=s(4848);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var t=["className","disabled","children"];function l(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?l(Object(s),!0).forEach((function(r){o(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}function o(e,r,s){return(r=function(e){var r=function(e,r){if("object"!=n(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,r||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==n(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function c(e){var r=e.className,s=void 0===r?"":r,n=e.disabled,l=e.children,o=function(e,r){if(null==e)return{};var s,a,n=function(e,r){if(null==e)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==r.indexOf(a))continue;s[a]=e[a]}return s}(e,r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(a=0;a<t.length;a++)s=t[a],-1===r.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}(e,t);return(0,a.jsx)("button",i(i({},o),{},{className:"inline-flex items-center rounded-md border border-transparent bg-gray-800 px-4 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-gray-700 focus:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 active:bg-gray-900 ".concat(n&&"opacity-25"," ")+s,disabled:n,children:l}))}},4294:(e,r,s)=>{s.d(r,{A:()=>n});var a=s(4848);function n(e){var r=e.message,s=e.className,n=void 0===s?"":s;return r?(0,a.jsx)("div",{className:"c-error ".concat(n),children:r}):null}},6642:(e,r,s)=>{s.r(r),s.d(r,{default:()=>c});var a=s(6540),n=s(3589),t=s(1332),l=s(4294),i=s(2292),o=s(4848);function c(e){var r=e.auth,s=e.conversationGroup,c=e.messages,d=e.participants,u=(0,a.useRef)(null),m=d.find((function(e){return e.id!==r.user.id})),h=(0,n.mN)({message:""}),f=h.data,_=h.setData,g=h.post,p=h.processing,j=h.errors,x=h.reset;return(0,a.useEffect)((function(){u.current&&(u.current.scrollTop=u.current.scrollHeight)}),[c]),(0,o.jsxs)(t.A,{header:(0,o.jsxs)("div",{className:"p-messages__header",children:[(0,o.jsxs)("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:[(null==m?void 0:m.name)||"不明なユーザー","との会話"]}),(0,o.jsx)(n.N_,{href:route("messages.index"),className:"p-messages__back-button",children:"戻る"})]}),children:[(0,o.jsx)(n.p3,{title:"".concat((null==m?void 0:m.name)||"不明なユーザー","との会話")}),(0,o.jsxs)("div",{className:"p-messages__container",children:[(0,o.jsx)("div",{className:"p-messages__card",children:(0,o.jsx)("div",{className:"p-messages__card-body",children:(0,o.jsx)("div",{ref:u,className:"p-messages__conversation",children:c.map((function(e){return(0,o.jsxs)("div",{className:"p-messages__message ".concat(e.sender_id===r.user.id?"p-messages__message--sent":"p-messages__message--received"),children:[e.sender_id!==r.user.id&&(0,o.jsx)("div",{className:"p-messages__avatar",children:e.sender.avatar?(0,o.jsx)("img",{src:(a=e.sender.avatar,a?a.startsWith("storage/avatars/")?"/".concat(a):"/storage/avatars/".concat(a):""),alt:e.sender.name,className:"w-8 h-8 rounded-full"}):(0,o.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 text-xs font-bold",children:(s=e.sender.name,s.split(" ").map((function(e){return e.charAt(0)})).join("").toUpperCase().substring(0,2))})}),(0,o.jsxs)("div",{className:"p-messages__bubble ".concat(e.sender_id===r.user.id?"p-messages__bubble--sent":"p-messages__bubble--received"),children:[(0,o.jsx)("p",{className:"p-messages__message-text",children:e.message}),(0,o.jsx)("p",{className:"p-messages__message-time",children:new Date(e.created_at).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]})]},e.id);var s,a}))})})}),(0,o.jsx)("div",{className:"p-messages__card",children:(0,o.jsx)("div",{className:"p-messages__card-body",children:(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(route("messages.store",s.id),{onSuccess:function(){x("message")}})},className:"p-messages__form",children:[(0,o.jsxs)("div",{className:"c-form-group",children:[(0,o.jsx)("label",{htmlFor:"message",className:"c-form-label",children:"メッセージ"}),(0,o.jsx)("textarea",{id:"message",value:f.message,onChange:function(e){return _("message",e.target.value)},rows:3,className:"p-messages__textarea",required:!0}),(0,o.jsx)(l.A,{message:j.message,className:"c-form-error"})]}),(0,o.jsx)("div",{className:"p-messages__submit-container",children:(0,o.jsx)(i.A,{type:"submit",disabled:p,children:"送信"})})]})})})]})]})}}}]);